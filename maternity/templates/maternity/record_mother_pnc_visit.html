{% extends 'users/dashboard_base.html' %}
{% load static %}

{% block title %}Record Postnatal Visit (Mother) - HMS{% endblock %}

{% block content %}
<div style="max-width: 1000px; margin: 0 auto; padding: 20px;">
    <div style="margin-bottom: 30px;">
        <a href="{% url 'maternity:pregnancy_detail' pregnancy.id %}"
            style="color: #00a8e8; text-decoration: none; font-weight: 600;">
            <i class="fas fa-arrow-left"></i> Back to Pregnancy Record
        </a>
    </div>

    <div style="background: white; padding: 32px; border-radius: 12px; box-shadow: 0 2px 8px rgba(0,0,0,0.08);">
        <div style="margin-bottom: 24px;">
            <h1 style="font-size: 24px; font-weight: 700; color: #0f172a; margin: 0 0 8px 0;">Postnatal Visit Checklist
                (Mother)</h1>
            <p style="color: #64748b; margin: 0;">{{ pregnancy.patient.full_name }} • Delivered {{
                delivery.delivery_datetime|date:"d M Y H:i" }}</p>
        </div>

        <form method="POST">
            {% csrf_token %}

            <!-- Visit Information -->
            <div style="background: #f8fafc; padding: 20px; border-radius: 8px; margin-bottom: 20px;">
                <h3 style="font-size: 16px; font-weight: 600; margin: 0 0 16px 0; color: #0f172a;">Visit Information
                </h3>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px;">
                    <div>
                        <label class="form-label"><strong>Visit Date</strong></label>
                        {{ form.visit_date }}
                    </div>
                    <div>
                        <label class="form-label"><strong>Day Post-Delivery</strong></label>
                        {{ form.visit_day }}
                    </div>
                </div>
            </div>

            <!-- Vitals -->
            <div style="background: #f8fafc; padding: 20px; border-radius: 8px; margin-bottom: 20px;">
                <h3 style="font-size: 16px; font-weight: 600; margin: 0 0 16px 0; color: #0f172a;">Vital Signs</h3>
                <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 16px;">
                    <div>
                        <label class="form-label"><strong>Systolic BP</strong></label>
                        {{ form.bp_systolic }}
                    </div>
                    <div>
                        <label class="form-label"><strong>Diastolic BP</strong></label>
                        {{ form.bp_diastolic }}
                    </div>
                    <div>
                        <label class="form-label"><strong>Temperature (°C)</strong></label>
                        {{ form.temperature }}
                    </div>
                    <div>
                        <label class="form-label"><strong>Pulse (bpm)</strong></label>
                        {{ form.pulse }}
                    </div>
                </div>
            </div>

            <!-- Physical Examination -->
            <div style="background: #f8fafc; padding: 20px; border-radius: 8px; margin-bottom: 20px;">
                <h3 style="font-size: 16px; font-weight: 600; margin: 0 0 16px 0; color: #0f172a;">Physical Examination
                </h3>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px; margin-bottom: 16px;">
                    <div>
                        <label class="form-label"><strong>Uterus Involution</strong></label>
                        {{ form.uterus_involution }}
                    </div>
                    <div>
                        <label class="form-label"><strong>Lochia</strong></label>
                        {{ form.lochia }}
                    </div>
                </div>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px;">
                    <div>
                        <label class="form-label"><strong>Perineum Wound</strong></label>
                        {{ form.perineum_wound }}
                    </div>
                    <div>
                        <label class="form-label"><strong>C-Section Wound</strong></label>
                        {{ form.cs_wound }}
                    </div>
                </div>
            </div>

            <!-- Care & Counseling -->
            <div style="background: #f8fafc; padding: 20px; border-radius: 8px; margin-bottom: 20px;">
                <h3 style="font-size: 16px; font-weight: 600; margin: 0 0 16px 0; color: #0f172a;">Care & Counseling
                </h3>
                <div style="margin-bottom: 16px;">
                    <label class="form-label"><strong>Breastfeeding Status</strong></label>
                    {{ form.breastfeeding_status }}
                </div>
                <div
                    style="display: grid; grid-template-columns: 1fr 2fr; gap: 16px; align-items: end; margin-bottom: 16px;">
                    <div class="form-check" style="margin-bottom: 10px;">
                        {{ form.family_planning_counseling }}
                        <label class="form-check-label" for="{{ form.family_planning_counseling.id_for_label }}">
                            <strong>FP Counseling Given</strong>
                        </label>
                    </div>
                    <div>
                        <label class="form-label"><strong>Contraception Method</strong></label>
                        {{ form.contraception_method }}
                    </div>
                </div>
                <div>
                    <label class="form-label"><strong>Mental Health / Mood</strong></label>
                    {{ form.mood_assessment }}
                </div>
            </div>

            <!-- Clinical Assessment -->
            <div style="background: #f8fafc; padding: 20px; border-radius: 8px; margin-bottom: 20px;">
                <h3 style="font-size: 16px; font-weight: 600; margin: 0 0 16px 0; color: #0f172a;">Assessment & Plan
                </h3>
                <div style="margin-bottom: 16px;">
                    <label class="form-label"><strong>Complaints</strong></label>
                    {{ form.complaints }}
                </div>
                <div style="margin-bottom: 16px;">
                    <label class="form-label"><strong>Clinical Findings</strong></label>
                    {{ form.findings }}
                </div>
                <div style="margin-bottom: 16px;">
                    <label class="form-label"><strong>Plan</strong></label>
                    {{ form.plan }}
                </div>
                <div>
                    <label class="form-label"><strong>Next Visit Date</strong></label>
                    {{ form.next_visit_date }}
                </div>
            </div>

            <div style="display: flex; gap: 12px; padding-top: 20px; border-top: 1px solid #e2e8f0;">
                <button type="submit"
                    style="background: #00a8e8; color: white; padding: 12px 32px; border: none; border-radius: 8px; font-weight: 600; cursor: pointer;">
                    <i class="fas fa-check"></i> Save Visit Record
                </button>
                <a href="{% url 'maternity:pregnancy_detail' pregnancy.id %}"
                    style="background: #e2e8f0; color: #475569; padding: 12px 32px; border-radius: 8px; font-weight: 600; text-decoration: none; display: inline-block;">
                    Cancel
                </a>
            </div>
        </form>
    </div>
</div>
{% endblock %}