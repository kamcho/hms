{% extends 'users/dashboard_base.html' %}
{% load static %}

{% block title %}Inventory management - HMS{% endblock %}

{% block content %}
<style>
    :root {
        --primary-gradient: linear-gradient(135deg, #6366f1 0%, #a855f7 100%);
        --success-gradient: linear-gradient(135deg, #10b981 0%, #059669 100%);
        --warning-gradient: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
        --danger-gradient: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
        --glass-bg: rgba(255, 255, 255, 0.95);
        --glass-border: rgba(255, 255, 255, 0.2);
        --text-primary: #1e293b;
        --text-secondary: #64748b;
        --text-muted: #94a3b8;
        --card-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
    }

    .inventory-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 2rem;
        animation: fadeInDown 0.5s ease-out;
    }

    .inventory-header h1 {
        font-size: 2rem;
        background: var(--primary-gradient);
        background-clip: text;
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        font-weight: 700;
        color: var(--text-primary);
    }

    .btn-add {
        background: var(--primary-gradient);
        color: white;
        padding: 0.75rem 1.5rem;
        border-radius: 12px;
        text-decoration: none;
        display: flex;
        align-items: center;
        gap: 0.5rem;
        font-weight: 600;
        transition: transform 0.3s ease, box-shadow 0.3s ease;
        box-shadow: 0 4px 15px rgba(99, 102, 241, 0.4);
    }

    .btn-add:hover {
        transform: translateY(-2px);
        box-shadow: 0 6px 20px rgba(99, 102, 241, 0.6);
    }

    .inventory-table-container {
        background: var(--glass-bg);
        backdrop-filter: blur(8px);
        border: 1px solid var(--glass-border);
        border-radius: 20px;
        padding: 1.5rem;
        box-shadow: var(--card-shadow);
        overflow: hidden;
        animation: fadeInUp 0.5s ease-out;
    }

    .inventory-table {
        width: 100%;
        border-collapse: collapse;
        color: var(--text-secondary);
    }

    .inventory-table th {
        text-align: left;
        padding: 1rem;
        border-bottom: 2px solid var(--glass-border);
        color: var(--text-muted);
        font-size: 0.875rem;
        text-transform: uppercase;
        letter-spacing: 0.05em;
        font-weight: 600;
        background: rgba(99, 102, 241, 0.03);
    }

    .inventory-table td {
        padding: 1.25rem 1rem;
        border-bottom: 1px solid var(--glass-border);
    }

    .inventory-table tr:last-child td {
        border-bottom: none;
    }

    .inventory-table tr {
        transition: background-color 0.3s ease;
    }

    .inventory-table tr:hover {
        background: rgba(99, 102, 241, 0.05);
        transform: translateX(2px);
        transition: all 0.3s ease;
    }

    .badge-category {
        background: var(--primary-gradient);
        color: white;
        padding: 0.375rem 0.875rem;
        border-radius: 9999px;
        font-size: 0.75rem;
        font-weight: 600;
        text-transform: uppercase;
        letter-spacing: 0.025em;
        box-shadow: 0 2px 4px rgba(99, 102, 241, 0.2);
    }

    .stock-status {
        display: inline-flex;
        align-items: center;
        gap: 0.5rem;
        font-size: 0.875rem;
        font-weight: 600;
        padding: 0.375rem 0.75rem;
        border-radius: 8px;
        transition: all 0.3s ease;
    }

    .status-critical {
        background: rgba(239, 68, 68, 0.1);
        color: #dc2626;
        border: 1px solid rgba(239, 68, 68, 0.2);
    }

    .status-normal {
        background: rgba(16, 185, 129, 0.1);
        color: #059669;
        border: 1px solid rgba(16, 185, 129, 0.2);
    }

    .price-tag {
        font-family: 'JetBrains Mono', monospace;
        font-weight: 700;
        color: var(--text-primary);
        background: rgba(99, 102, 241, 0.1);
        padding: 0.25rem 0.5rem;
        border-radius: 6px;
        font-size: 0.875rem;
    }

    @keyframes fadeInDown {
        from {
            opacity: 0;
            transform: translateY(-20px);
        }

        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    @keyframes fadeInUp {
        from {
            opacity: 0;
            transform: translateY(20px);
        }

        to {
            opacity: 1;
            transform: translateY(0);
        }
    }
</style>

<div class="inventory-header">
    <h1>Inventory Items</h1>
    <a href="{% url 'inventory:add_item' %}" class="btn-add">
        <i class="fas fa-plus"></i>
        Add New Item
    </a>
</div>

<div class="inventory-table-container">
    <table class="inventory-table">
        <thead>
            <tr>
                <th>Item Name</th>
                <th>Category</th>
                <th>Unit</th>
                <th>Selling Price</th>
                <th>Stock Quantity</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            {% for item in items %}
            <tr>
                <td><a href="{% url 'inventory:add_stock' item.id %}"
                        style="text-decoration: none; color: var(--text-primary); font-weight: 600; display: inline-block; padding: 0.25rem 0.5rem; border-radius: 6px; transition: all 0.3s ease;" 
                        onmouseover="this.style.background='rgba(99, 102, 241, 0.1)'"
                        onmouseout="this.style.background='transparent'">{{ item.name }}</a></td>
                <td><span class="badge-category">{{ item.category }}</span></td>
                <td>{{ item.unit }}</td>
                <td class="price-tag">${{ item.selling_price }}</td>
                <td>
                    <div
                        class="stock-status {% if item.total_stock <= item.reorder_level %}status-critical{% else %}status-normal{% endif %}">
                        <i class="fas fa-layer-group"></i>
                        {{ item.total_stock|default:0 }}
                    </div>
                </td>
                <td>
                    <div style="display: flex; gap: 0.75rem;">
                        <a href="#" style="color: var(--text-muted); transition: all 0.3s ease; padding: 0.5rem; border-radius: 6px;" 
                           onmouseover="this.style.color='#6366f1'; this.style.background='rgba(99, 102, 241, 0.1)'"
                           onmouseout="this.style.color='var(--text-muted)'; this.style.background='transparent'"><i class="fas fa-edit"></i></a>
                        <a href="#" style="color: var(--text-muted); transition: all 0.3s ease; padding: 0.5rem; border-radius: 6px;" 
                           onmouseover="this.style.color='#ef4444'; this.style.background='rgba(239, 68, 68, 0.1)'"
                           onmouseout="this.style.color='var(--text-muted)'; this.style.background='transparent'"><i class="fas fa-trash"></i></a>
                    </div>
                </td>
            </tr>
            {% empty %}
            <tr>
                <td colspan="6" style="text-align: center; padding: 3rem; color: var(--text-secondary);">
                    <i class="fas fa-box-open"
                        style="font-size: 3rem; color: var(--text-muted); margin-bottom: 1rem; display: block;"></i>
                    <div style="font-size: 1.125rem; font-weight: 500; margin-bottom: 0.5rem;">No items found in inventory.</div>
                    <div style="font-size: 0.875rem; color: var(--text-muted);">Start by adding your first inventory item.</div>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}